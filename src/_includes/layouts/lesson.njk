---
layout: layouts/base
---

{% from "macros.njk" import icon, logo, script %}

<div class="h-1 bg-indigo-600 dark:bg-indigo-400 sticky top-0 z-50"></div>
<header class="sticky top-1 left-0 z-50 py-3 font-semibold text-sm bg-white dark:bg-gray-900 border-b">
  <div class="container flex items-center justify-between">
    <a class="sr-only focus:not-sr-only focus:absolute focus:left-2 focus:bg-white dark:focus:bg-gray-900" href="#main">Skip to content</a>
    <a class="flex items-center no-underline text-lg font-mono leading-none tracking-tight text-indigo-600 dark:text-indigo-300" href="{{ '/' | url }}">
      {{ logo(class='mr-1.5') }}
      thinkdev
    </a>

    <div class="flex items-center">
      <button
        type="button"
        aria-label="Toggle lesson navigation"
        id="lessonsNavToggle"
        aria-expanded="false"
        aria-controls="lessonsNav"
        class="inline-flex items-center hover:text-gray-900 hover:dark:text-gray-100 lg:hidden"
      >
        {{ icon('list', width=24, height=24) }}
      </button>
    </div>
  </div>
</header>

<div class="container pt-10 pb-12 lg:pt-12 lg:grid lg:grid-cols-[minmax(220px,1fr),minmax(640px,2fr),1fr] lg:gap-10">
  <nav
    class="
      hidden lessons-nav border-b bg-white dark:bg-gray-900
      sticky top-[calc(0.25rem+49px)] left-0 z-50 pt-5 pb-6 px-2 -mt-12 mb-12
      max-h-[calc(100vh-0.25rem-49px)] overflow-y-auto text-sm
      lg:block lg:border-b-0 lg:z-auto
      lg:my-0 lg:py-0 lg:px-4 lg:h-fit
      lg:max-h-[calc(100vh-0.25rem-49px-6rem)]
      lg:top-[calc(0.25rem+49px+3rem)]
      print:static
    "
    id="lessonsNav"
    aria-labelledby="lessonsNavLabel"
  >
    <strong id="lessonsNavLabel" class="block mb-3 font-semibold dark:text-gray-100">Lessons</strong>
    <ol class="list-none my-0 pl-0">
      {% for lesson in collections.all | eleventyNavigation %}
        <li class="py-1.5 border-l">
          <a
            href="{{ lesson.url | url }}"
            {% if page.url == lesson.url %} aria-current="page" {% endif %}
            class="flex items-center px-4"
          >
            {{ lesson.title }}
          </a>
        </li>
      {% endfor %}
    </ol>
  </nav>

  <main id="main">
    <article class="prose prose-indigo max-w-[640px] mx-auto lg:max-w-none lg:mx-0 dark:prose-invert">
      <header>
        <h1>{{ title }}</h1>
        <p><b class="lead">{{ excerpt | safe }}</b></p>
        {% if collections.slides | find("data.order", eleventyNavigation.order) %}
          <p>
            <a class="mr-1.5 inline-flex items-center" href="{{ '/slides/' ~ page.fileSlug | url }}">Slides
              {{- icon('play-circle', class='ml-1.5') -}}
            </a>
            <span class="mr-1.5">&middot;</span>
            <a
              class="inline-flex items-center"
              href="{{ '/slides/' ~ page.fileSlug ~ '.pdf' | url }}"
              download="{{ page.fileSlug ~ '.pdf' }}"
              title="Download slides as PDF"
              aria-label="Download slides as PDF"
            >PDF {{- icon('download', class='ml-1.5') -}}</a>
          </p>
        {% endif %}
      </header>

      {{ content | safe }}

      <nav aria-label="Previous/next lesson" class="flex justify-between mt-10">
        {% set lessons = collections.all | eleventyNavigation %}
        {% set prevLesson = lessons | find("order", eleventyNavigation.order - 1) %}
        {% if prevLesson %}
          <a href="{{ prevLesson.url | url }}" rel="prev" class="inline-flex items-center mr-auto">
            {{ icon('arrow-left', class='mr-1.5') }}
            Previous
          </a>
        {% endif %}
        {% set nextLesson = lessons | find("order", eleventyNavigation.order + 1) %}
        {% if nextLesson %}
          <a href="{{ nextLesson.url | url }}" rel="next" class="inline-flex items-center ml-auto">
            Next
            {{ icon('arrow-right', class='ml-1.5') }}
          </a>
        {% endif %}
      </nav>
    </article>
  </main>
</div>

{{ script("toggle-outline.js") }}
